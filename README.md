
<a href='https://pledgie.com/campaigns/30176'><img alt='Click here to lend your support to: Integration test recorder for Angular/Ember/React/Vanilla web applications. and make a donation at pledgie.com !' src='https://pledgie.com/campaigns/30176.png?skin_name=chrome' border='0' ></a>

# test-recorder
This is an ambitious project that aims to record integration tests for any web application.

I am currently focused on getting the tests compatible with nightwish and Ember cli.

This project records the ways you interact with your application, and then generates the code to playback these actions inside an acceptance test runner. 
The idea is to save you time writing these tests by hand.
 
You should only add the TestRecorder.js script to your app when your app behaves as
expected (happy flow) as then you will have the tests generated for this. You can then take these tests and modify them to your specific needs.

#Current UI interactions that are recorded for acceptance tests:

* Button clicks, they also generate andThen code blocks. 
* records text input fillins
* Changes in DOM additions/removals, only items with ID's are recorded and that don't have the doNotRecord css class.

#Notes

The test recorder mode is specified by the user in the script tag with the data-framework attribute and then is read 
using `document.currentScript.dataset`. This works in Chrome, Edge and FF. If IE support is needed I'll have to add some
extra functionality.

If an element doesn't have an id then an exlusive dom path selector will be generated to click on this button in a test, ie
```js
click("html>body>div>div:eq(0)>button");
andThen(function () {
 equal(find("#foo").length, 0, "foo removed AFTER user [INSERT REASON]");
});
```

If you don't want an element to be recorded, and any of its children add this class to it `doNotRecord`

##Running the Vanilla demo app

The first thing you need to do is install the local npm dependencies in ./demo/VanillaJsApp

You can open the vanilla/index.html in the browser to see the app running with the test recorder UI


##Running the Vanilla test


This uses the basicConf.js to run a single file ('test-recorder-spec.js'), you can paste the generated test code into there

You need to start webdriver:
`npm run webdriver`

then run protractor with :
`npm run vanilla-test`

# React

Include this line in your page

`<script src="dist/emberTestRecorder.js" data-framework="react"></script>`

##Running the React demo app

`npm run demo-react`

##Running the React protractor test

This uses the react/basicConf.js to run a single file ('test-recorder-spec.js'), you can paste the generated test code into there

You need to start webdriver:
`npm run webdriver`

then run protractor with :
`npm run demo-react-test`


# Ember

To use this, simply include this line of code someone in your ember-cli, I recommend in your `app.js`:

```js
import main from 'ember-cli-test-recorder/main';// jshint ignore:line
```
Note: we use jshint ignore:line as we don't actually do anything with the main object, it sets everything up by itself

## Roadmap
* Record any changes to location (routes, html5 etc)
* Allow selects to be automated
* Allow more complex click actions like the steps to click on inputs like select2 to be recorded
* Ignore clicks on ember elements with no effect
* Create codes for key-presses 
* Get mutations to work with async effects more accurately with performance api
* create tests for changes of lengths in lists
* Generate cucumber specs

##TIPS

Avoid making multiple button clicks (or other interactions that cause asynchronous) updates until DOM has 
finished updating. This will allow code generated by the mutations observer to be placed in the in the
generated code. 

#Browser compatibility

Chrome + Firefox + Edge
